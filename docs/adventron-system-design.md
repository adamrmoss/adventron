# Adventron Game Console — Full Technical Design Report

## Introduction

The **Adventron** is a retro‑inspired game console built around Western Design Center’s **W65C265S** microcontroller. The W65C265S integrates a **65C816‑compatible CPU core** with on‑chip peripherals such as timers, UARTs, and chip‑select logic. The design maps external memory and peripherals into the microcontroller’s 24‑bit address space and uses bit‑banged serial interfaces for modern devices. Graphics are handled by an **FTDI FT813** display controller that can drive an **800 × 600 display with 24‑bit colour**. Audio is generated by **Yamaha’s YMF825 FM synthesizer**, which provides 16 voices and a built‑in DAC. A **TDA9983B HDMI transmitter** converts the RGB and I²S streams into a single HDMI output. The system also includes an **SD card for mass storage**, a **DS3234 real‑time clock**, two **Atari‑style joystick ports** with optional analog paddle support through an **8‑channel ADC**, eight **toggle switches** on the front panel, and expansion headers for the microcontroller’s UARTs.

This report describes the integration of each subsystem, discusses bus timing and peripheral performance at 14 MHz, and includes complete BoM and manufacturing estimates.

---

## CPU and Clock System

The W65C265S is a fully static CMOS device that operates from 2.8 V – 5.5 V and supports a static to 8 MHz bus clock ([WDC Product Page](https://www.westerndesigncenter.com)). The microcontroller includes a W65C816S‑compatible CPU core with a 24‑bit address bus and a 16 MB linear address space. WDC’s product brief lists an 8 MHz operating bus speed. Internally, the device has a dual‑clock system: an external **CLK** pin and an optional **FCLK** oscillator. The **System Speed Control Register (SSCR)** allows **PHI2** (the bus clock) to be driven from either CLK or FCLK/4 and provides per‑chip‑select speed control. When FCLK is used, CLK must be no more than one‑quarter of the FCLK frequency. Typical FCLK oscillators of 3.579545 MHz or 4.000 MHz are suggested, implying bus frequencies of 1–4 MHz in slow mode or up to 4 MHz in fast mode.

Although WDC rates the W65C265S for 8 MHz, the underlying **W65C816S** core can run faster. The W65C816 datasheet’s AC characteristics show that when operated at 4.75–5.25 V, the processor can achieve **14 MHz** maximum clock frequency. Running the Adventron at 14 MHz is feasible if the external memory and bus decoding logic can keep up.

The selected SRAM has a 55 ns access time and operates from a single 2.7‑5.5 V supply ([Farnell Listing](https://www.farnell.com)), corresponding to approximately **18 MHz bandwidth**, so a 14 MHz bus is within tolerance. The Flash memories used for the cartridge and system ROM specify 70–90 ns access times (80 ns ≈ 12.5 MHz), so **wait states** may be needed when running above 8 MHz. For simplicity the system provides two PHI2 modes via the SSCR register: **high‑speed mode (≈14 MHz)** for SRAM access and **slow mode (≈7 MHz)** for Flash and peripheral accesses, using the SSCR bits to select FCLK or FCLK/4 on each chip‑select.

---

## Memory System and Address Map

| Address Range | Size | Device | Width | Chip Select | Notes |
|---------------|------|---------|--------|--------------|-------|
| $000000–$3FFFFF | 4 MB | Static RAM (2M×16) | 16‑bit | CS5B | 10 ns, zero‑wait |
| $400000–$BFFFFF | 8 MB | Removable Flash (Cartridge) | 16‑bit | CS6B | 45 ns, level‑shifted 3.3 V |
| $C00000–$FFFFFF | 4 MB | System Flash ROM | 16‑bit | CS7B | 45 ns, level‑shifted 3.3 V |
| $000000–$001FFF | 8 KB | Boot nvSRAM | 8‑bit | CS4B | Bootloader and vector ROM |

### SRAM (CS5B)
2M×16 asynchronous SRAM, **10 ns** tACC (IS61WV204816E‑10). Provides 4 MB zero‑wait RAM directly mapped to CPU data bus. Series resistors on D[15:0] reduce bus reflections. Typical load capacitance 20–25 pF per line.

### Cartridge Flash (CS6B)
8 MB NOR (MX29GL640EHT2I‑45G), 45 ns, 3.3 V. Accessed via two 74LVC16T245 bidirectional level shifters. tACC 45 ns + tPD 5 ns = 50 ns < 71 ns cycle → zero‑wait. Supports in‑system programming (sector erase, 10 µs/word write).

### System Flash (CS7B)
4 MB NOR (MX29GL320EHT2I‑45G), same timing as cartridge ROM. Firmware updates handled from SRAM loader or nvSRAM monitor. Protects OS region via lock bits.

### Boot nvSRAM (CS4B)
128K×8 nvSRAM (CY14B101Q2), 45 ns, 3.3 V. Mapped to D[7:0], contains reset vector, self‑test, and in‑circuit flash programmers. Instant write, non‑volatile.

### Timing Budget Summary
At PHI2 = 14 MHz (71 ns period):  
- SRAM 10 ns, NOR 50 ns, nvSRAM 50 ns.  
- Level‑shifter delay included.  
- All within 71 ns → zero‑wait across memory map.

---

## Graphics Subsystem

### FT813 Display Controller
The **FT813** (EVE 2 family) supports **up to 800×600@60 Hz** output with 24‑bit RGB. It contains **1 MB of display‑list memory** and hardware widgets for bitmaps, text, gauges, and other primitives. The FT813 operates at **3.3 V** and interfaces via **SPI or QSPI**. Because the W65C265S lacks a hardware SPI controller, the FT813 is controlled through **bit‑banged SPI** using general‑purpose I/O lines.

### HDMI Transmitter
**TDA9983BHN/C1** converts RGB + HS/VS and I²S audio into HDMI. 27 MHz reference crystal, 3.3 V logic. TMDS lines routed 100 Ω differential; AC‑coupled as specified. Optional EDID pins available for display handshake.

---

## Audio Subsystem

**YMF825** synthesizer provides 16‑voice FM/PCM synthesis. Controlled by bit‑banged SPI ≤ 4 MHz. Its 16‑bit DAC outputs are RC‑filtered and amplified by **TPA6132A2** stereo amp. Digital I²S stream also feeds the TDA9983B for HDMI audio.  
Power supply decoupled (10 µF + 0.1 µF) per YMF825 pin cluster.

---

## Peripheral Interfaces

### Bit‑Banged SPI Devices
- **microSD:** FAT‑formatted storage (25 MHz max, typ. 4 MHz). GPIO SPI lines CLK/MOSI/MISO/CS.
- **DS3234 RTC:** Battery‑backed clock with TCXO, alarm interrupt.
- **YMF825:** Audio synthesizer on dedicated chip‑select.

### Analog and Digital Inputs
- **ADC0808:** 8‑channel 8‑bit ADC (100 µs conversion). Inputs 0–7 for paddles or sensors.
- **Joysticks:** 2× DB9 Atari ports (digital) and optional analog inputs through ADC.
- **Toggle Switches:** 8× SPDT switches on GPIO with 10 kΩ pull‑ups.

### UART Expansion
UART0 and UART1 on 6‑pin headers (TX, RX, VCC, GND, RTS/CTS). 115.2 kbps max, ESD‑protected.

### Peripheral Summary Table
| Peripheral | Interface | Description |
|-------------|------------|-------------|
| microSD | Bit‑banged SPI | Mass storage (FAT); card detect, write‑protect on GPIO |
| RTC | DS3234 (SPI) | Battery‑backed clock with TCXO, alarm, 32 kHz output optional |
| ADC | ADC0808 | 8‑ch 8‑bit ADC for paddles or sensors |
| Joysticks | 2× DB9 | Atari‑style controllers; optional analog via ADC |
| Toggles | GPIO | 8× SPDT switches (pull‑ups) |
| UARTs | 2× 6‑pin | Debug or expansion (TX/RX/RTS/CTS) |

**Peripheral timing:** Bit‑banged SPI = 1–4 MHz (default). RTC ≤ 20 MHz max; microSD ≥ 25 MHz spec, constrained by firmware. All below CPU bus limits.

---

## Power System

- **Input:** USB‑C OTG 5 V (Power‑only). Connector: GCT USB4085‑GF‑A. 5 V/3 A limit; Rp 56 kΩ on CC1/CC2 for device mode. Automatic 5 V switch disconnects when host detached.
- **Regulators:** LM2937ET‑5.0 (5 V, 1 A) and TLV75533 (3.3 V, 500 mA).
- **Reset:** Supervisory IC (4.5 V threshold) drives /RESB.
- **Decoupling:** 0.1 µF per IC, 10 µF per rail, 470 µF bulk input.

---

## I/O Port Assignment

| Port | Bits | Function |
|------|------|-----------|
| P0 | 0–7 | microSD SPI (CLK, MOSI, MISO, CS, CD, WP) + GPIO |
| P1 | 0–7 | RTC SPI (SCK, MOSI, MISO, CS) + ADC control (ALE, START, EOC, OE) |
| P2 | 0–7 | ADC data bus (D0–D7) |
| P3 | 0–7 | Joystick 1 (Up, Down, Left, Right, Fire) + Toggle 0–2 |
| P4 | 0–7 | Joystick 2 (Up, Down, Left, Right, Fire) + Toggle 3–5 |
| P5 | 0–7 | Toggle 6–7 + I²S (LRCLK/BCLK/DATA) + Audio amp enable |
| P6 | 0–7 | UART0 TX/RX/RTS/CTS, UART1 TX/RX, LEDs |
| P7 | 0–7 | SPI for YMF825 and FT813 |
| P8 | 0–7 | CS4B–CS7B, /WE, /OE, /RESET, IRQ |
| P9 | 0–7 | Expansion/general I/O |

Unused pins default to input with pull‑ups.

---

## PCB and Layout

Four‑layer PCB with GND, 5 V, 3.3 V, and signal planes. Level shifters adjacent to Flash. 22 Ω series resistors on address/data/control. Audio ground isolated from TMDS. Matched TMDS pairs 100 Ω differential.

---


## Bill of Materials and Costing

| Ref | Component | Example Part | Specs | Est. USD |
|------|------------|--------------|--------|-----------|
| U1 | W65C265S | W65C265S6TPLG-14 | 5 V, 16-bit bus | 14.00 |
| U2 | SRAM | IS61WV204816E-10 | 4 MB, 10 ns, 5 V | 9.80 |
| U3 | Flash (Cartridge) | MX29GL640EHT2I-45G | 8 MB, 16-bit, 3.3 V | 7.50 |
| U4 | Flash (System) | MX29GL320EHT2I-45G | 4 MB, 16-bit, 3.3 V | 5.90 |
| U5 | nvSRAM | CY14B101Q2 | 128K×8, 45 ns, 3.3 V | 6.20 |
| U6 | Level Shifters | 74LVC16T245 | 16-bit transceivers | 1.60 ea |
| U7 | FT813Q | Display Controller | 800×600 RGB, 3.3 V | 8.40 |
| U8 | HDMI TX | TDA9983BHN/C1 | HDMI 1.3, 3.3 V | 6.80 |
| U9 | Audio Synth | YMF825 | FM/PCM, 3.3 V | 5.50 |
| U10 | Audio Amp | TPA6132A2RTJR | Stereo, 3.3 V | 1.30 |
| U11 | RTC | DS3234 | SPI, 3.3 V | 4.10 |
| U12 | ADC | ADC0808CCN | 8-bit, 5 V | 2.20 |
| CN1 | Cartridge Edge | AMP 558002-1 | 44-pin edge | 3.80 |
| CN2 | HDMI Port | 10029449-111RLF | Type-A SMD | 2.60 |
| CN3–CN4 | Joystick Ports | L717SDE09PA4CH4F | DB9 female | 4.40 ea |
| CN5 | SD Slot | 503398-1892 | microSD SMD | 1.90 |
| CN6 | UART Header | Generic | 6-pin 0.1″ | 0.20 |
| Regs | TLV75533, LM2937 | 3.3/5 V LDOs | — | 1.35 |
| Misc | Passives | 0603 SMD | — | 10.00 |

**Estimated component total:** ≈ $95–110 (Mouser Q4 2025).  
**Fabrication & Assembly:** 4-layer PCB ($35) + assembly ($45) + QC ($10) = **≈ $185–200 per unit.**

---

## System Performance

- Bus speed: 14 MHz, zero-wait.  
- Video: 800×600 RGB/HDMI.  
- Audio: 16-voice FM + PCM.  
- Storage: microSD ≤ 32 GB.  
- I/O: 2× DB9 joysticks, 8 switches, 8 analog inputs.  
- Power: 5 V input, < 1 A.

---

## Conclusion

The Adventron integrates a 14 MHz 65C265S with high-speed SRAM, dual NOR Flashes, and nvSRAM boot, producing a fully 16-bit bus architecture with zero-wait memory access. Combined with the FT813/TDA9983B video chain, YMF825 audio, and modern peripherals, it achieves a balance between retro design and modern reliability.
